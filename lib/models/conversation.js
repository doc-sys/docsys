"use strict";

var mongoose = require('mongoose');

var conversation = new mongoose.Schema({
  convoId: {
    type: String,
    required: true,
    unique: true
  },
  participants: [{
    type: mongoose.Schema.Types.ObjectId,
    ref: 'User',
    required: true
  }],
  lastMessage: {
    type: Date,
    "default": Date.now()
  },
  messages: [{
    from: {
      type: mongoose.Schema.Types.ObjectId,
      ref: 'User',
      required: true
    },
    content: {
      type: String,
      required: true
    },
    timestamp: {
      type: Date,
      "default": Date.now()
    }
  }]
});
module.exports = {
  conversation: mongoose.model('Conversation', conversation)
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RlbHMvY29udmVyc2F0aW9uLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImNvbnZlcnNhdGlvbiIsIlNjaGVtYSIsImNvbnZvSWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJwYXJ0aWNpcGFudHMiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwibGFzdE1lc3NhZ2UiLCJEYXRlIiwibm93IiwibWVzc2FnZXMiLCJmcm9tIiwiY29udGVudCIsInRpbWVzdGFtcCIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxVQUFELENBQXRCOztBQUVBLElBQU1DLFlBQVksR0FBRyxJQUFJRixRQUFRLENBQUNHLE1BQWIsQ0FBb0I7QUFDeENDLEVBQUFBLE9BQU8sRUFBRTtBQUNSQyxJQUFBQSxJQUFJLEVBQUVDLE1BREU7QUFFUkMsSUFBQUEsUUFBUSxFQUFFLElBRkY7QUFHUkMsSUFBQUEsTUFBTSxFQUFFO0FBSEEsR0FEK0I7QUFNeENDLEVBQUFBLFlBQVksRUFBRSxDQUNiO0FBQ0NKLElBQUFBLElBQUksRUFBRUwsUUFBUSxDQUFDRyxNQUFULENBQWdCTyxLQUFoQixDQUFzQkMsUUFEN0I7QUFFQ0MsSUFBQUEsR0FBRyxFQUFFLE1BRk47QUFHQ0wsSUFBQUEsUUFBUSxFQUFFO0FBSFgsR0FEYSxDQU4wQjtBQWF4Q00sRUFBQUEsV0FBVyxFQUFFO0FBQ1pSLElBQUFBLElBQUksRUFBRVMsSUFETTtBQUVaLGVBQVNBLElBQUksQ0FBQ0MsR0FBTDtBQUZHLEdBYjJCO0FBaUJ4Q0MsRUFBQUEsUUFBUSxFQUFFLENBQ1Q7QUFDQ0MsSUFBQUEsSUFBSSxFQUFFO0FBQ0xaLE1BQUFBLElBQUksRUFBRUwsUUFBUSxDQUFDRyxNQUFULENBQWdCTyxLQUFoQixDQUFzQkMsUUFEdkI7QUFFTEMsTUFBQUEsR0FBRyxFQUFFLE1BRkE7QUFHTEwsTUFBQUEsUUFBUSxFQUFFO0FBSEwsS0FEUDtBQU1DVyxJQUFBQSxPQUFPLEVBQUU7QUFBRWIsTUFBQUEsSUFBSSxFQUFFQyxNQUFSO0FBQWdCQyxNQUFBQSxRQUFRLEVBQUU7QUFBMUIsS0FOVjtBQU9DWSxJQUFBQSxTQUFTLEVBQUU7QUFBRWQsTUFBQUEsSUFBSSxFQUFFUyxJQUFSO0FBQWMsaUJBQVNBLElBQUksQ0FBQ0MsR0FBTDtBQUF2QjtBQVBaLEdBRFM7QUFqQjhCLENBQXBCLENBQXJCO0FBOEJBSyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFBRW5CLEVBQUFBLFlBQVksRUFBRUYsUUFBUSxDQUFDc0IsS0FBVCxDQUFlLGNBQWYsRUFBK0JwQixZQUEvQjtBQUFoQixDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImxldCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJylcclxuXHJcbmNvbnN0IGNvbnZlcnNhdGlvbiA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG5cdGNvbnZvSWQ6IHtcclxuXHRcdHR5cGU6IFN0cmluZyxcclxuXHRcdHJlcXVpcmVkOiB0cnVlLFxyXG5cdFx0dW5pcXVlOiB0cnVlLFxyXG5cdH0sXHJcblx0cGFydGljaXBhbnRzOiBbXHJcblx0XHR7XHJcblx0XHRcdHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuXHRcdFx0cmVmOiAnVXNlcicsXHJcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxyXG5cdFx0fSxcclxuXHRdLFxyXG5cdGxhc3RNZXNzYWdlOiB7XHJcblx0XHR0eXBlOiBEYXRlLFxyXG5cdFx0ZGVmYXVsdDogRGF0ZS5ub3coKSxcclxuXHR9LFxyXG5cdG1lc3NhZ2VzOiBbXHJcblx0XHR7XHJcblx0XHRcdGZyb206IHtcclxuXHRcdFx0XHR0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcblx0XHRcdFx0cmVmOiAnVXNlcicsXHJcblx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbnRlbnQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG5cdFx0XHR0aW1lc3RhbXA6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3coKSB9LFxyXG5cdFx0fSxcclxuXHRdLFxyXG59KVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7IGNvbnZlcnNhdGlvbjogbW9uZ29vc2UubW9kZWwoJ0NvbnZlcnNhdGlvbicsIGNvbnZlcnNhdGlvbikgfVxyXG4iXX0=