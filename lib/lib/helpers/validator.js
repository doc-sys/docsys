"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.checkSchemaValidation = void 0;

var _expressValidator = require("express-validator");

var _error = require("./error");

var checkSchemaValidation = function checkSchemaValidation(req, res, next) {
  var errors = (0, _expressValidator.validationResult)(req).formatWith(function (_ref) {
    var msg = _ref.msg,
        param = _ref.param;
    return "".concat(msg);
  });

  if (!errors.isEmpty()) {
    return next(new _error.ErrorHandler(400, errors.array()[0]));
  }

  next();
};

exports.checkSchemaValidation = checkSchemaValidation;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvaGVscGVycy92YWxpZGF0b3IudHMiXSwibmFtZXMiOlsiY2hlY2tTY2hlbWFWYWxpZGF0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsImVycm9ycyIsImZvcm1hdFdpdGgiLCJtc2ciLCJwYXJhbSIsImlzRW1wdHkiLCJFcnJvckhhbmRsZXIiLCJhcnJheSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUVPLElBQU1BLHFCQUFxQixHQUFHLFNBQXhCQSxxQkFBd0IsQ0FBQ0MsR0FBRCxFQUFlQyxHQUFmLEVBQThCQyxJQUE5QixFQUFxRDtBQUN0RixNQUFNQyxNQUFNLEdBQUcsd0NBQWlCSCxHQUFqQixFQUFzQkksVUFBdEIsQ0FBaUMsZ0JBQW9CO0FBQUEsUUFBakJDLEdBQWlCLFFBQWpCQSxHQUFpQjtBQUFBLFFBQVpDLEtBQVksUUFBWkEsS0FBWTtBQUFFLHFCQUFVRCxHQUFWO0FBQWlCLEdBQXhFLENBQWY7O0FBQ0EsTUFBSSxDQUFDRixNQUFNLENBQUNJLE9BQVAsRUFBTCxFQUF1QjtBQUNuQixXQUFPTCxJQUFJLENBQUMsSUFBSU0sbUJBQUosQ0FBaUIsR0FBakIsRUFBc0JMLE1BQU0sQ0FBQ00sS0FBUCxHQUFlLENBQWYsQ0FBdEIsQ0FBRCxDQUFYO0FBQ0g7O0FBRURQLEVBQUFBLElBQUk7QUFDUCxDQVBNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UsIE5leHRGdW5jdGlvbiB9IGZyb20gJ2V4cHJlc3MnXHJcbmltcG9ydCB7IHZhbGlkYXRpb25SZXN1bHQgfSBmcm9tICdleHByZXNzLXZhbGlkYXRvcidcclxuaW1wb3J0IHsgRXJyb3JIYW5kbGVyIH0gZnJvbSAnLi9lcnJvcidcclxuXHJcbmV4cG9ydCBjb25zdCBjaGVja1NjaGVtYVZhbGlkYXRpb24gPSAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pID0+IHtcclxuICAgIGNvbnN0IGVycm9ycyA9IHZhbGlkYXRpb25SZXN1bHQocmVxKS5mb3JtYXRXaXRoKCh7IG1zZywgcGFyYW0gfSkgPT4geyByZXR1cm4gYCR7bXNnfWAgfSlcclxuICAgIGlmICghZXJyb3JzLmlzRW1wdHkoKSkge1xyXG4gICAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvckhhbmRsZXIoNDAwLCBlcnJvcnMuYXJyYXkoKVswXSkpXHJcbiAgICB9XHJcblxyXG4gICAgbmV4dCgpXHJcbn0iXX0=