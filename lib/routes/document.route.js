"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _express = _interopRequireDefault(require("express"));

var _authenticate = _interopRequireWildcard(require("../lib/helpers/authenticate"));

var _document = require("../controller/document.controller");

var _expressValidator = require("express-validator");

var createNew = _interopRequireWildcard(require("../requestSchemas/document.createNew.json"));

var router = _express["default"].Router();

router.route('/')
/**
 * @api {get} /document/ All documents
 * @apiName documentsGetAll
 * @apiGroup Document
 * @apiDescription Gets all documents on the instance. Can only be accessed by an admin.
 * @apiSuccess {Object[]} document All documents
 * @apiError (401) NotAuthorized Only admins are allow to access this ressource
 * @apiError (500) InternalServerError Something went wron processing your request
 */
.get([_authenticate["default"], _authenticate.requireAdmin, _document.getAllDocuments], function (req, res) {
  res.status(200).json({
    document: res.locals.docs
  });
}).post([_authenticate["default"], (0, _expressValidator.checkSchema)(createNew)]);
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yb3V0ZXMvZG9jdW1lbnQucm91dGUudHMiXSwibmFtZXMiOlsicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInJvdXRlIiwiZ2V0IiwiYXV0aGVudGljYXRlIiwicmVxdWlyZUFkbWluIiwiZ2V0QWxsRG9jdW1lbnRzIiwicmVxIiwicmVzIiwic3RhdHVzIiwianNvbiIsImRvY3VtZW50IiwibG9jYWxzIiwiZG9jcyIsInBvc3QiLCJjcmVhdGVOZXciLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFHQSxJQUFJQSxNQUFNLEdBQUdDLG9CQUFRQyxNQUFSLEVBQWI7O0FBRUFGLE1BQU0sQ0FBQ0csS0FBUCxDQUFhLEdBQWI7QUFDSTs7Ozs7Ozs7O0FBREosQ0FVS0MsR0FWTCxDQVVTLENBQUNDLHdCQUFELEVBQWVDLDBCQUFmLEVBQTZCQyx5QkFBN0IsQ0FWVCxFQVV3RCxVQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUM5REEsRUFBQUEsR0FBRyxDQUFDQyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFBRUMsSUFBQUEsUUFBUSxFQUFFSCxHQUFHLENBQUNJLE1BQUosQ0FBV0M7QUFBdkIsR0FBckI7QUFDSCxDQVpMLEVBYUtDLElBYkwsQ0FhVSxDQUFDVix3QkFBRCxFQUFlLG1DQUFZVyxTQUFaLENBQWYsQ0FiVjtBQWVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJsQixNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzLCB7IFJlcXVlc3QsIFJlc3BvbnNlLCBOZXh0RnVuY3Rpb24gfSBmcm9tIFwiZXhwcmVzc1wiXHJcbmltcG9ydCBhdXRoZW50aWNhdGUsIHsgcmVxdWlyZUFkbWluIH0gZnJvbSAnLi4vbGliL2hlbHBlcnMvYXV0aGVudGljYXRlJ1xyXG5pbXBvcnQgU3RvcmFnZUFkYXB0ZXIgZnJvbSAnLi4vbGliL3N0b3JhZ2UvYWRhcHRlcnMvaW50ZXJmYWNlJ1xyXG5pbXBvcnQgeyBjaGVja1Byb3BlcnR5VXNlcm5hbWUsIGdldEFsbERvY3VtZW50cyB9IGZyb20gJy4uL2NvbnRyb2xsZXIvZG9jdW1lbnQuY29udHJvbGxlcic7XHJcbmltcG9ydCBMb2NhbCBmcm9tICcuLi9saWIvc3RvcmFnZS9hZGFwdGVycy9sb2NhbCc7XHJcbmltcG9ydCB7IGNoZWNrLCBjaGVja1NjaGVtYSB9IGZyb20gJ2V4cHJlc3MtdmFsaWRhdG9yJztcclxuXHJcbmltcG9ydCAqIGFzIGNyZWF0ZU5ldyBmcm9tICcuLi9yZXF1ZXN0U2NoZW1hcy9kb2N1bWVudC5jcmVhdGVOZXcuanNvbidcclxuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSBcImRvbWFpblwiO1xyXG5cclxubGV0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKClcclxuXHJcbnJvdXRlci5yb3V0ZSgnLycpXHJcbiAgICAvKipcclxuICAgICAqIEBhcGkge2dldH0gL2RvY3VtZW50LyBBbGwgZG9jdW1lbnRzXHJcbiAgICAgKiBAYXBpTmFtZSBkb2N1bWVudHNHZXRBbGxcclxuICAgICAqIEBhcGlHcm91cCBEb2N1bWVudFxyXG4gICAgICogQGFwaURlc2NyaXB0aW9uIEdldHMgYWxsIGRvY3VtZW50cyBvbiB0aGUgaW5zdGFuY2UuIENhbiBvbmx5IGJlIGFjY2Vzc2VkIGJ5IGFuIGFkbWluLlxyXG4gICAgICogQGFwaVN1Y2Nlc3Mge09iamVjdFtdfSBkb2N1bWVudCBBbGwgZG9jdW1lbnRzXHJcbiAgICAgKiBAYXBpRXJyb3IgKDQwMSkgTm90QXV0aG9yaXplZCBPbmx5IGFkbWlucyBhcmUgYWxsb3cgdG8gYWNjZXNzIHRoaXMgcmVzc291cmNlXHJcbiAgICAgKiBAYXBpRXJyb3IgKDUwMCkgSW50ZXJuYWxTZXJ2ZXJFcnJvciBTb21ldGhpbmcgd2VudCB3cm9uIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0XHJcbiAgICAgKi9cclxuICAgIC5nZXQoW2F1dGhlbnRpY2F0ZSwgcmVxdWlyZUFkbWluLCBnZXRBbGxEb2N1bWVudHNdLCAocmVxLCByZXMpID0+IHtcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGRvY3VtZW50OiByZXMubG9jYWxzLmRvY3MgfSlcclxuICAgIH0pXHJcbiAgICAucG9zdChbYXV0aGVudGljYXRlLCBjaGVja1NjaGVtYShjcmVhdGVOZXcpLF0pXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlciJdfQ==